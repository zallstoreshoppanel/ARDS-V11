<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login | BugWA Panel</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
  *{box-sizing:border-box;margin:0;padding:0;font-family:"Poppins",sans-serif;}
  body{
    height:100vh;
    background:linear-gradient(135deg,#101020,#1a1a40);
    display:flex;align-items:center;justify-content:center;
    overflow:hidden;
  }
  .glass{
    width:360px;
    background:rgba(255,255,255,0.1);
    border-radius:20px;
    backdrop-filter:blur(12px);
    box-shadow:0 0 25px rgba(0,0,0,0.3);
    padding:40px 30px;
    color:#fff;
    position:relative;
    animation:fadeIn .8s ease;
  }
  @keyframes fadeIn{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
  .glass h2{text-align:center;margin-bottom:25px;font-weight:600;letter-spacing:1px;}
  .inputBox{position:relative;margin-bottom:20px;}
  .inputBox input{
    width:100%;padding:12px 15px;border:none;outline:none;
    border-radius:10px;background:rgba(255,255,255,0.15);
    color:#fff;font-size:15px;
  }
  .inputBox label{
    position:absolute;left:15px;top:12px;
    color:#ccc;font-size:14px;pointer-events:none;
    transition:0.3s;
  }
  .inputBox input:focus~label,
  .inputBox input:valid~label{
    top:-10px;left:10px;font-size:12px;color:#4dd0e1;
  }
  button{
    width:100%;padding:12px;margin-top:5px;
    background:linear-gradient(135deg,#4dd0e1,#0288d1);
    border:none;border-radius:10px;color:white;font-weight:600;
    cursor:pointer;transition:.3s;
  }
  button:hover{opacity:.9;transform:translateY(-2px);}
  .toggle{
    text-align:center;margin-top:15px;font-size:14px;
  }
  .toggle span{color:#4dd0e1;cursor:pointer;}
  .loading{
    position:absolute;inset:0;background:rgba(0,0,0,0.5);
    display:none;align-items:center;justify-content:center;
    border-radius:20px;
  }
  .loading.active{display:flex;}
  .spinner{
    width:50px;height:50px;border:4px solid #fff;
    border-top-color:transparent;border-radius:50%;
    animation:spin 1s linear infinite;
  }
  @keyframes spin{100%{transform:rotate(360deg)}}
  .msg{
    text-align:center;margin-top:10px;font-size:13px;color:#ff8a80;
    min-height:20px;
  }
</style>
</head>
<body>

<div class="glass" id="authBox">
  <h2 id="title">Login ke BugWA</h2>
  <div class="inputBox">
    <input type="email" id="email" required>
    <label>Email</label>
  </div>
  <div class="inputBox">
    <input type="password" id="password" required>
    <label>Password</label>
  </div>
  <button id="authBtn">Masuk</button>
  <div class="toggle">
    Belum punya akun? order @ARDSDEV<span id="toggleMode"></span>
  </div>
  <div class="msg" id="msg"></div>
  <div class="loading" id="loading"><div class="spinner"></div></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyArE6B5jQCSECpOusTxrOYmUsjeFEa17YI",
  authDomain: "bugwa-1fc47.firebaseapp.com",
  projectId: "bugwa-1fc47",
  storageBucket: "bugwa-1fc47.firebasestorage.app",
  messagingSenderId: "309575475227",
  appId: "1:309575475227:web:c2a7a9123afb30023698be"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

let mode = "login"; // atau 'register'

const email = document.getElementById("email");
const password = document.getElementById("password");
const authBtn = document.getElementById("authBtn");
const toggleMode = document.getElementById("toggleMode");
const title = document.getElementById("title");
const msg = document.getElementById("msg");
const loading = document.getElementById("loading");

toggleMode.addEventListener("click", () => {
  mode = mode === "login" ? "register" : "login";
  title.textContent = mode === "login" ? "Login ke BugWA" : "Daftar Akun Baru";
  authBtn.textContent = mode === "login" ? "Masuk" : "Daftar";
  toggleMode.textContent = mode === "login" ? "Daftar" : "Login";
  msg.textContent = "";
});

authBtn.addEventListener("click", async () => {
  const emailVal = email.value.trim();
  const passVal = password.value.trim();
  if(!emailVal || !passVal){
    msg.textContent = "Isi semua kolom!";
    return;
  }
  msg.textContent = "";
  loading.classList.add("active");

  try{
    if(mode === "login"){
      await signInWithEmailAndPassword(auth, emailVal, passVal);
      msg.style.color="#81c784";
      msg.textContent = "Login berhasil! ðŸ”¥";
      setTimeout(()=>window.location.href="bugwas.html",1500);
    }else{
      await createUserWithEmailAndPassword(auth, emailVal, passVal);
      msg.style.color="#81c784";
      msg.textContent = "Akun berhasil dibuat ðŸŽ‰";
      setTimeout(()=>window.location.reload(),1500);
    }
  }catch(error){
    msg.style.color="#ff8a80";
    msg.textContent = error.message;
  }finally{
    loading.classList.remove("active");
  }
});
</script>
</body>
</html>
